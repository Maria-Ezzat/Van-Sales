<div class="card shadow-sm border-0 rounded-4 p-4" *ngIf="product">

  <div class="d-flex justify-content-between align-items-start">

    <div class="d-flex align-items-center">
      <img src="/assets/icons/keyboard_backspace.svg" class="me-3 pointer" style="width: 24px; height: 24px;"
        routerLink="/sites/product" alt="Back" />
      <div>
        <h2 class="mb-0 color-purple-700">{{ product?.name }}</h2>
        <small class="text-muted">{{"sites.product.code"|translate}}: {{ product?.code }}</small>
      </div>
    </div>


    <div class="d-flex align-items-center gap-2">
         <span class="fw-semibold">{{ (product?.isActive ? 'sites.product.activ' : 'sites.product.disActiv') | translate }}</span>

      <p-inputSwitch [(ngModel)]="product.isActive " disabled></p-inputSwitch>
    </div>
  </div>

  <div class="card-body mt-4">
    <div class="row g-4">

      <!-- Card: Pricing -->
      <div class="col-md-6 col-xl-4">
        <div class="card rounded-4 shadow-sm p-3 h-100">
          <h6 class="text-purple-700 mb-3">üí∞ {{"sites.product.pricing"|translate}}</h6>
          <p><strong>{{"sites.product.retail"|translate}}:</strong> {{ product.retailPrice }} {{"sites.product.EGP"|translate}} </p>
          <p><strong>{{"sites.product.wholesale"|translate}}:</strong> {{ product.wholesalePrice  }} {{"sites.product.EGP"|translate}}</p>
          <p><strong>{{"sites.product.VIP"|translate}}:</strong> {{ product.vipClientsPrice  }} {{"sites.product.EGP"|translate}}</p>
        </div>
      </div>

      <!-- Card: Packaging -->
      <div class="col-md-6 col-xl-4">
        <div class="card rounded-4 shadow-sm p-3 h-100">
          <h6 class="text-purple-700 mb-3">üì¶ {{"sites.product.packaging"|translate}}</h6>
          <p><strong>{{"sites.product.smallerUnits"|translate}}:</strong> {{ product.smallerUnitsOfMeasurements }}</p>
          <p><strong>{{"sites.product.units/Cartoon"|translate}}:</strong> {{ product.numOfUnitPerCartoon }}</p>
          <p><strong>{{"sites.product.safetyStock"|translate}}:</strong> {{ product.safetyStocks }}</p>
        </div>
      </div>

      <!-- Card: Dimensions -->
      <div class="col-md-6 col-xl-4">
        <div class="card rounded-4 shadow-sm p-3 h-100">
          <h6 class="text-purple-700 mb-3">üìè {{"sites.product.dimensions"|translate}}</h6>
          <p><strong>{{"sites.product.packSize"|translate}}:</strong> {{ product.packSize }}</p>
          <p><strong>{{"sites.product.netWeight(L)"|translate}}:</strong> {{ product.netWeightPerLitre }}</p>
          <p><strong>{{"sites.product.weight(KG)"|translate}}:</strong> {{ product.weightPerKG }}</p>
        </div>
      </div>

      <!-- Card: Classification -->
      <div class="col-md-6 col-xl-4">
        <div class="card rounded-4 shadow-sm p-3 h-100">
          <h6 class="text-purple-700 mb-3">üìö {{"sites.product.classification"|translate}}</h6>
          <p><strong>{{"sites.product.unit"|translate}}:</strong> {{  getUnitName(product.unit) }}</p>
          <p><strong>{{"sites.product.grade"|translate}}:</strong> {{ getGradeName(product.grade) }}</p>
          <p><strong>{{"sites.product.status"|translate}}:</strong> {{ product.productStatus == 1 ? 'Available' : 'Unavailable' }}</p>
        </div>
      </div>

      <!-- Card: Category & Brand -->
      <div class="col-md-6 col-xl-4">
        <div class="card rounded-4 shadow-sm p-3 h-100">
          <h6 class="text-purple-700 mb-3">üè∑Ô∏è {{"sites.product.category & Brand"|translate}}</h6>
          <p><strong>{{"sites.product.category"|translate}}:</strong> {{ product.categoryName }}</p>
          <p><strong>{{"sites.product.productGroup"|translate}}:</strong> {{ product.productGroupName }}</p>
          <p><strong>{{"sites.product.brand"|translate}}:</strong> {{ product.brandName }}</p>
        </div>
      </div>

      <!-- Card: Extra Info -->
      <div class="col-md-6 col-xl-4">
        <div class="card rounded-4 shadow-sm p-3 h-100">
          <h6 class="text-purple-700 mb-3">üìå {{"sites.product.otherInfo"|translate}}</h6>
          <p><strong>{{"sites.product.expiryDate"|translate}}:</strong> {{ product.expiryDate | date }}</p>
          <p><strong>{{"sites.product.API"|translate}}:</strong> {{ product.productAPI }}</p>
        </div>
      </div>

    <!-- Card: Total Stock Summary -->
<div class="col-md-6 col-xl-4">
  <div class="card rounded-4 shadow-sm p-3 h-100 bg-light">
    <h6 class="text-purple-700 mb-3">üì¶ {{"sites.product.totalStock"|translate}}</h6>
    <p class="mb-2"><strong>{{"sites.product.totalQuantity"|translate}}:</strong> {{ product.totalQuantity }}</p>
    <p class="mb-0"><strong>{{"sites.product.totalWeight"|translate}}:</strong> {{ product.totalWeight }} KG</p>
  </div>
</div>

<!-- Card: Warehouses -->
<div class="col-8">
  <div class="card rounded-4 shadow-sm p-3 h-100">
    <h6 class="text-purple-700 mb-4">üè¨ {{"sites.product.warehouses"|translate}}</h6>

    <div class="row g-3">
      <div class="col-md-6 col-xl-4" *ngFor="let warehouse of product.warehouses">
        <div class="card border-0 shadow-sm rounded-4 p-3 h-100 bg-light">
          <h6 class="text-purple-700">{{ warehouse.warehouseName }}</h6>
          <p class="mb-1"><strong>{{"sites.product.quantity"|translate}}:</strong> {{ warehouse.quantity }}</p>
          <p class="mb-0"><strong>{{"sites.product.weight"|translate}}:</strong> {{ warehouse.weight }} KG</p>
        </div>
      </div>
      <div *ngIf="!product.warehouses?.length" class="text-muted text-center w-100">
        {{"sites.product.No warehouse data available."|translate}}
      </div>
    </div>
  </div>
</div>


    </div>
  </div>
</div>